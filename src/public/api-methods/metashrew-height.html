<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>metashrew_height | Alkanes Explorer</title>
  <link rel="stylesheet" href="../css/minimal.css">
  <link rel="stylesheet" href="../css/api-methods.css">
</head>
<body>
  <!-- Sidebar Navigation -->
  <div class="sidebar">
    <h2>API Methods</h2>
    
    <!-- Core Alkanes Functions -->
    <h3>Core Alkanes Functions</h3>
    <ul>
      <li><a href="simulate.html">simulate</a></li>
      <li><a href="trace-method.html">trace</a></li>
      <li><a href="traceblock.html">traceblock</a></li>
      <li><a href="multisimulate.html">multisimulate</a></li>
    </ul>
    
    <!-- Protorune Functions -->
    <h3>Protorune Functions</h3>
    <ul>
      <li><a href="protorunesbyaddress.html">protorunesbyaddress</a></li>
      <li><a href="protorunesbyoutpoint.html">protorunesbyoutpoint</a></li>
      <li><a href="protorunesbyheight.html">protorunesbyheight</a></li>
      <li><a href="spendablesbyaddress.html">spendablesbyaddress</a></li>
    </ul>
    
    <!-- Runes Compatibility -->
    <h3>Runes Compatibility</h3>
    <ul>
      <li><a href="runesbyaddress.html">runesbyaddress</a></li>
      <li><a href="runesbyoutpoint.html">runesbyoutpoint</a></li>
      <li><a href="runesbyheight.html">runesbyheight</a></li>
    </ul>
    
    <!-- JSON-RPC Methods -->
    <h3>JSON-RPC Methods</h3>
    <ul>
      <li><a href="metashrew-height.html">metashrew_height</a></li>
      <li><a href="sandshrew-multicall.html">sandshrew_multicall</a></li>
      <li><a href="btc-getblockcount.html">btc_getblockcount</a></li>
    </ul>
    
    <!-- Indexer Functions -->
    <h3>Indexer Functions</h3>
    <ul>
      <li><a href="alkane-inventory.html">alkane_inventory</a></li>
      <li><a href="call-view.html">call_view</a></li>
      <li><a href="call-multiview.html">call_multiview</a></li>
    </ul>
    
    <div class="sidebar-footer">
      <a href="../index.html">‚Üê Back to Homepage</a>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Method Header -->
    <div class="method-header">
      <div class="method-title">
        <h1>metashrew_height</h1>
        <span class="method-badge badge-rpc">JSON-RPC</span>
      </div>
      <p class="method-description">Returns the current height that the Metashrew indexer has processed up to. This value represents the blockchain height that the indexer is currently polling, and is typically one block ahead of the actual blockchain node height.</p>
    </div>
    
    <!-- Method Metadata -->
    <div class="method-metadata">
      <div class="metadata-item">
        <div class="metadata-label">Method Type:</div>
        <div class="metadata-value">JSON-RPC Method</div>
      </div>
      <div class="metadata-item">
        <div class="metadata-label">JSON-RPC Method:</div>
        <div class="metadata-value">metashrew_height</div>
      </div>
      <div class="metadata-item">
        <div class="metadata-label">Parameters:</div>
        <div class="metadata-value">None</div>
      </div>
      <div class="metadata-item">
        <div class="metadata-label">Return Type:</div>
        <div class="metadata-value">String (block height as string)</div>
      </div>
    </div>
    
    <!-- Examples Section -->
    <div class="example-container">
      <h2>Examples</h2>
      
      <div class="example-tabs">
        <div class="example-tab active" data-target="request-example">Request</div>
        <div class="example-tab" data-target="response-example">Response</div>
        <div class="example-tab" data-target="curl-example">cURL</div>
      </div>
      
      <div id="request-example" class="example-content">
        <h3>Example Request</h3>
        <div class="code-block">{
  "method": "metashrew_height",
  "params": [],
  "id": 0,
  "jsonrpc": "2.0"
}</div>
      </div>
      
      <div id="response-example" class="example-content" style="display: none;">
        <h3>Example Response</h3>
        <div class="code-block">{
  "jsonrpc": "2.0",
  "result": "814048",
  "id": 0
}</div>
      </div>
      
      <div id="curl-example" class="example-content" style="display: none;">
        <h3>cURL Command</h3>
        <div class="code-block">curl -vvv https://mainnet.sandshrew.io/v2/lasereyes -X POST -d '{"method":"metashrew_height","params":[],"id":0,"jsonrpc":"2.0"}' -H 'Content-Type: application/json'</div>
      </div>
    </div>
    
    <!-- Usage Section -->
    <div class="usage-section">
      <h2>Try It</h2>
      
      <form class="usage-form api-test-form">
        <div class="form-group">
          <label for="method-name">Method:</label>
          <input type="text" id="method-name" value="metashrew_height" readonly>
        </div>
        
        <div class="form-group">
          <label for="method-params">Parameters (JSON array):</label>
          <textarea id="method-params" readonly>[]</textarea>
        </div>
        
        <button type="submit">Execute Request</button>
      </form>
      
      <div class="results-container">
        <p>Results will appear here after execution.</p>
      </div>
    </div>
    
    <!-- Notes Section -->
    <div class="notes-section">
      <h2>Notes</h2>
      <ul>
        <li><strong>Response Format:</strong> The response is returned as a string representing the block height, not a number. You should use parseInt() to convert it to a number for calculations.</li>
        <li><strong>Height Relationship:</strong> The metashrew_height value is typically 1 block ahead of the btc_getblockcount value. This is normal behavior as it represents the block the indexer is currently polling.</li>
        <li><strong>Sync Status:</strong> This method is useful for determining the sync status of the Metashrew indexer by comparing its value with btc_getblockcount.</li>
        <li><strong>Polling Interval:</strong> The height typically updates every ~10 minutes when a new Bitcoin block is mined.</li>
        <li><strong>Reliable Method:</strong> This method is generally the most reliable way to check if the Metashrew API is functioning properly.</li>
      </ul>
    </div>
    
    <!-- Related Methods Section -->
    <div class="related-methods">
      <h2>Related Methods</h2>
      <ul>
        <li><a href="btc-getblockcount.html">btc_getblockcount</a> - Returns the current Bitcoin blockchain height.</li>
        <li><a href="sandshrew-multicall.html">sandshrew_multicall</a> - Batch multiple API calls together, including metashrew_height.</li>
      </ul>
    </div>
  </div>

  <!-- Scripts -->
  <script src="../js/api-methods.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Example tabs functionality
      const tabs = document.querySelectorAll('.example-tab');
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          // Remove active class from all tabs
          tabs.forEach(t => t.classList.remove('active'));
          // Add active class to clicked tab
          this.classList.add('active');
          
          // Hide all content
          document.querySelectorAll('.example-content').forEach(content => {
            content.style.display = 'none';
          });
          
          // Show content for active tab
          const targetId = this.getAttribute('data-target');
          document.getElementById(targetId).style.display = 'block';
        });
      });
      
      // Form submission
      document.querySelector('.api-test-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const resultsContainer = document.querySelector('.results-container');
        resultsContainer.innerHTML = '<p>Loading...</p>';
        
        try {
          // Create the API client
          const apiClient = new MetashrewApiClient();
          
          // Make the API call
          const result = await apiClient.call('metashrew_height', []);
          
          // Format the result
          const formattedResult = `<h3>Result</h3>
<pre class="code-block">${result}</pre>
<h3>Parsed as Number</h3>
<pre class="code-block">${parseInt(result, 10).toLocaleString()}</pre>`;
          
          // Display the result
          resultsContainer.innerHTML = formattedResult;
        } catch (error) {
          resultsContainer.innerHTML = `<div class="error">
<h3>Error</h3>
<pre class="code-block">${error.message}</pre>
</div>`;
        }
      });
    });
  </script>
</body>
</html>
